[toc]

<br>

### 1. Notification (201p)

- 다양한 방법으로 정보를 전달할 수 있다 (소리, 진동, 불빛, ...)
- 구성요소
  - ticker bar (+icon)
  - 자세한 내용을 보기위한 Action
  - 확장 상태바 (icon, Title, )
    - 누르면 --> 팬딩인텐트 실행 (부재중전화상태바 -> 누르면 -> 전화가 걸린다)

1. Notification Manager 만들기

   ```java
   private NotificationManager nm;
   ```

2. Builder 만들기

   ```java
   Notification.Builder  b=new Notification.Builder(this);
   ```

3. Ticker Bar 설정하기

   ```java
   b.setSmallIcon(moodId);
   b.setTicker(null);
   ```

4. 확장상태바 설정

   ```java
   b.setContentTitle(getText(R.string.status_bar_info));
   b.setContentText(getText(textId));
   ```

5. 팬딩인텐트 만들기

   ```java
   b.setContentIntent(PendingIntent.getActivity(this, 0,
                   new Intent(this, NotifyingController.class), 0));
   ```

   

<br>

### 2. Data Storage(143p)

- 데이터 저장, 접근 방법

  1. Preference (193p)

     - *FristApp*에서 실습했다.

     - Map구조와 유사하다.

     - 앱을 종료한 후 다시 실행해도 변경한 값이 저장되어있다.

       1. 접근권한과 함께 파일 불러오기

          ```java
          SharedPreferences prefs = getPreferences(MODE_PRIVATE);
          SharedPreferences prefs = getSharedPreferences("myData", MODE_PRIVATE); // 파일을 여기저기서 공유하고싶으면 이렇게 사용하기
          ```

       2. 읽어올 키값과 값이 없을 경우defValue를 설정하기

          ```java
          int v = prefs.getInt("key", 0);
          ```

       3. 파일에 해당 정보를 저장하기

          ```java
          SharedPreferences.Editor editor = prefs.edit();
          editor.putInt("key", ++v);
          ```

       4. commit()

          ```java
          editor.commit();
          ```

       5. 저장된 xml파일 확인해보기 (shared_prefs 에 저장된다.)

          ```xml
          <map>
              <int name="key" value="3" />
          </map>
          ```

     - Preference UI

       - 체크박스, 다이얼로그 등 일부 기능 지원 --> 체크하면 프로세스 종료되어도 밑의형태로 저장되어있다.

       - key값만 prefui.xml에 설정해주면 된다.

         ```xml
         <map>
             <string name="myEdittext">banana</string>
             <boolean name="myToggle" value="true" />
             <string name="myList">2</string>
         </map>
         ```

         

  2. File

     - 기존 File 쓰기

       ```java
       FileOutputStream fo = new FileOutputStream("test.dat");
       ```

       - 문제점 : 어떤 경로에 써야하는지 알고, 지정해주어야한다 --> 지정경로에만 써야한다면, 다른 컴파일러나 버전과 호환성이 안좋을 수 있다.

     - 경로를 몰라도 사용해도되는 코드

       ```java
       br = new BufferedWriter(new OutputStreamWriter(openFileOutput(
           "data.txt", MODE_PRIVATE)));
       ```

     - DeviceFileExplorer > data > 해당 경로에 `files`라는 폴더가 새로 생성된다.

     - File 쓰기

       ```java
       TextView t = (TextView) findViewById(R.id.text1);
       
       BufferedWriter bo = new BufferedWriter(new OutputStreamWriter(openFileOutput(
           "data.txt", MODE_PRIVATE)));
       bo.append("안녕하세요.");
       bo.append("반갑습니다.");
       t.setText("파일이 정상적으로 생성되었습니다.");
       bo.flush();
       bo.close();
       ```

     - File 읽기

       ```java
       br = new BufferedReader(new InputStreamReader(openFileInput("data.txt")));
       String line;
       t.setText("");
       while((line = br.readLine())!=null) {
           t.append(line);
       }
       br.close();
       ```

     <br>

  3. Database

     - 대량의 데이터를 효율적으로 관리하기 위해 사용한다.

     - SQLite (146p)

       - 구성Field

         1. _id : 고유 Key값
         2. title
         3. body

       - Device File Explorer > data.db (저장되는 장소), data-journal(backup용) 에 저장된다.

       - Cursor 객체 리턴

         - Cursor ?   
           : 포인터와비슷.... (DB상의 위치를 리턴해준다고보면됨)

         ```java
         public Cursor fetchAllNotes() {
             return mDb.query(DATABASE_TABLE, new String[] 
                              {KEY_ROWID, KEY_TITLE, KEY_BODY}, null, null, null, null, null);
         }
         ```

         

  4. Network